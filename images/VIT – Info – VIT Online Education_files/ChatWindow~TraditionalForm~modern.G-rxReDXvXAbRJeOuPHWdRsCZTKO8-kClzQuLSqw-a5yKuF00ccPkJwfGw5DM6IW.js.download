(window.siqcwJsonp=window.siqcwJsonp||[]).push([["ChatWindow~TraditionalForm","ConversationMessageWindowDialog"],{"0f6e":function(e,t,i){},1141:function(e,t,i){"use strict";i("2500")},"12de":function(e,t,i){"use strict";i("c7bc")},"19c9":function(e,t,i){},"1e9a":function(e,t,i){"use strict";i("8293")},2500:function(e,t,i){},"2b0b":function(e,t,i){},"2ee5":function(e,t,i){},"3a7e":function(e,t,i){},4362:function(e,t,i){"use strict";var a=(i("ac6a"),i("2f62")),s=i("ef71"),n=i("e6fd"),o=i("0970"),l=i("56e1"),r=i("8db4"),d=i("6661"),c=i("c95e"),u=i("9654"),p=i("5f46"),m={name:"ConversationForm",mixins:[i("baec").a],props:{isEdit:{type:Boolean,default:!1},inputType:{type:String,default:""},question:String,onQuestionUpdate:Function,ignoreQuestion:Boolean,initiateChat:{type:Function,default:()=>{}}},data(){return{fieldValues:{},fieldList:[],isFieldsLoading:!1,defaultDepartment:"",isSubscribed:void 0,customFieldValues:{},chatDetail:this.getChatDetail()}},provide(){return{isCustomField:this.isCustomField}},inject:{embedDetail:{default:()=>({})},getPrevChatDetail:{default:()=>()=>({})},patchCurrentNavigation:{default:()=>()=>{}},getChatDetail:{default:()=>()=>({})},chatConsentNeeded:{default:!1},isCallForm:{default:()=>!1}},computed:{...Object(a.d)("embedstore",["visitorInfo","tempVisitorInfo"]),...Object(a.b)({defaultChatDepartment:"embedstore/defaultChatDepartment",defaultCallDepartments:"embedstore/defaultCallDepartments",getDepartmentDetail:"embedstore/getDepartmentDetail",isTraditionalForm:"embedstore/isTraditionalForm",embedStatus:"embedstore/embedStatus",chatConfig:"embedstore/chatConfig"}),isRemoveDeptField(){return e=>Object(l.k)(e)&&(this.showLimitedFields||this.defaultDepartment)},shouldShowCustomField(){return e=>{let t=this.visitorInfo.customfield.map(e=>e.name);return t.includes(e.name)}},isClearField(){return e=>{var t;let i=e.name||"siq_"+(e.field_name.toLowerCase()||(null===(t=e.input_card)||void 0===t?void 0:t.type.replace("visitor_","")));return(this.visitorInfo.clearfield||[]).includes(i)||this.isCustomField(e)}},filteredFieldList(){let e=this.fieldList;return!Object(r.b)(this.chatDetail)||this.isEdit||Object(l.a)(this.chatDetail,e)?e.filter(({meta:e})=>!(this.isRemoveDeptField(e)||this.isClearField(e))||!this.isEdit&&this.isCustomField(e)&&this.shouldShowCustomField(e)):[]},prevChatDetail(){return this.getPrevChatDetail()},isSkippable(){return!this.filteredFieldList.some(e=>!e.meta.skippable)},showLimitedFields(){return this.isEdit||this.prevChatDetail.attenderId},currentFormFieldConfig(){return Object(r.G)(this.isCallForm,this.ignoreQuestion)}},beforeMount(){this.init()},mounted(){o.c.forEach(e=>{this.tempVisitorInfo[e]&&(this.fieldValues[e]=this.tempVisitorInfo[e])})},methods:{init(){this.departmentId=this.defaultDepartment=this.prevChatDetail.departmentId||(this.isCallForm?this.defaultCallDepartments:this.defaultChatDepartment)||this.getChatDetail().departmentId,!n.e&&this.isEdit||!this.currentFormFieldConfig?this.fetchFormFields():this.handleFormLoad(),this.setFieldWatcher()},fetchFormFields(){this.isFieldsLoading=!0,this.$store.dispatch("embedstore/getVisitorConfiguration",{question:this.question,isCall:this.isCallForm}).finally(()=>this.isFieldsLoading=!1)},setFieldWatcher(){this.fieldUnWatchers=o.c.map(e=>this.$watch(()=>this.visitorInfo[e],t=>{"name"!==e&&"last_name"!==e||!Object(r.f)(t)||(t=""),this.$set(this.fieldValues,e,t)},{immediate:!0}))},checkAndStartChat(){if(this.isEdit||this.isFieldsLoading)return;let{visitorInfo:e}=this;e.chatstart||e.chatmode?(!this.isEdit&&!this.chatConsentNeeded&&this.initiateChat(),Object(d.b)()):Object(r.eb)()&&this.initiateChat()},handleFormLoad(){if(this.fieldList=(this.currentFormFieldConfig.msglist||[]).slice(),this.setCustomField(),this.isFieldsLoading=!1,this.filteredFieldList.length)return this.$emit("formLoad"),this.$nextTick(this.checkAndStartChat),this.setFieldFocus();this.$nextTick(()=>{this.emitFocus(),this.checkAndStartChat(),this.$emit(this.isEdit?"close":"submit")})},getFieldRefs(){return this.$refs.fields||[]},setFieldFocus(){n.t||s.c||this.$nextTick(()=>{if(!this.getFieldRefs().find(e=>{if(e.fieldKey&&!e.fieldConfig.value)return e.setFocus(),!0})){let e=this.$el.querySelector("input");e&&e.focus()}})},getCustomFieldPosition(e){return this.filteredFieldList,e=e.toLowerCase(),this.filteredFieldList.findIndex(t=>t.meta.field_name.toLowerCase()===e)},setCustomField(){let e=this.visitorInfo.customfield||[];!this.isEdit&&e.length&&(this.isTraditionalForm||this.isCallForm)&&e.forEach(e=>{let{name:t,options:i,required:a,type:s,visibility:n,hint:o,style:l,before:r,after:d,maxlength:c,minlength:u}=e;n=n||"both";let p=this.embedStatus,m="online"===n&&!p||"offline"===n&&p,f=this.fieldList,h=f.findIndex(e=>e.meta.name===t);if(m||-1!==h)return;u=c?0:u;let b={dname:"Agent",meta:{name:t,options:i,skippable:!("true"===a&&"label"!=s),type:s,visibility:n,style:l,before:r,after:d,input_card:{type:"custom_field"},msg:o,maxLength:c,minLength:u}};if(r||d){let e=this.getCustomFieldPosition(r||d);if(-1!==e)return void f.splice(r?e:e+1,0,b)}f.push(b)})},isCustomField:e=>e.input_card&&e.input_card.type===o.j.customfield,emitFocus(){this.$emit("focus")},focusNextField(e){let t=this.getFieldRefs()[e+1];if(!t)return this.emitFocus();t.fieldKey?t.setFocus():this.emitFocus()},handleUpdate(e,t,i){let{fieldValues:a,customFieldValues:s}=this;if(i)return s[e]=t,void this.handleCustomFieldCallback(e,t);this.$store.commit("embedstore/updateState",{key:"tempVisitorInfo",res:t,subKey:e}),t?a[e]=t:delete a[e]},handleCustomFieldCallback(e,t){let i=parent.$zohosq.values.customfield.find(t=>t.name===e);(null==i?void 0:i.callback)&&i.callback(t)},updateDepartmentId(e){this.departmentId=e.id,this.handleDepartmentStatus(e.status,e.engaged)},getEngagedMsg(){let e=this.visitorInfo.engagedBannerText;return e||(Object(r.M)("engaged")||(this.isCallForm?Object(r.r)():this.chatConfig.agents_engaged.message||"engaged.text"))},handleDepartmentStatus(e,t){this.$emit("deptUpdate",e),Object(r.b)(this.chatDetail)||this.patchCurrentNavigation({title:Object(r.H)(this.isCallForm,e)}),!e&&this.componentStatus&&this.$showBanner(this.$doI18N(this.componentStatus?t?this.getEngagedMsg():this.getOfflineMsg():"embed.offlinemsg"))},getOfflineMsg(e){return this.visitorInfo.offlineBannerText||(e?this.chatConfig.agents_busy.message:"chat.offline.dept")},hasValidFields(){if(!this.filteredFieldList.length)return!0;let e=!0;for(let t of[...this.getFieldRefs()].reverse())t.isValidField()||(e=!1);return e},getFormResponse(e){return this.getFieldRefs().map(t=>e?{msg:this.$doI18N("chat.skip"),meta:{type:"skip",value:""}}:{msg:this.fieldValues[t.fieldKey]||t.isDeptField&&this.getDepartmentDetail(this.departmentId).name||this.isSubscribed||this.$doI18N("chat.emptyvalue")})},getFormMessage(e){return this.getFieldRefs().reduce((t,i)=>{var a;let s=null===(a=i.fieldMeta.input_card)||void 0===a?void 0:a.type,n=this.$doI18N(o.m[s]||i.isDeptField&&"siqcw.department");if(s===o.j.firstname&&i.fieldConfig.salutation&&(t+=`*${this.$doI18N(o.m.salutation)}* \n ${Object(r.R)(i.fieldValues.salutation)} \n`),!n)return t;return t+`*${n}* \n ${!e&&(()=>this.fieldValues[i.fieldKey]||i.isDeptField&&this.getDepartmentDetail(this.departmentId).name)()||this.$doI18N("chat.emptyvalue")} \n`},"")}},watch:{visitorInfo(e){(e.chatstart||e.chatmode||Object(r.eb)())&&this.checkAndStartChat()},currentFormFieldConfig(e){this.$emit("deptUpdate",!0),e?this.handleFormLoad():this.fetchFormFields()},"visitorInfo.customfield":{deep:!0,handler(){this.setCustomField()}}},beforeDestroy(){this.fieldUnWatchers.forEach(e=>e()),delete this.fieldUnWatchers},components:{ConversationFormField:u.a,ConversationFormWrapper:c.a,FormFieldWrapper:p.a}},f=m,h=(i("1e9a"),i("2877")),b=Object(h.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ConversationFormWrapper",[e.isFieldsLoading?i("div",{staticClass:"flexM h100"},[i("LoadingIcon")],1):[e._l(e.filteredFieldList,function(t,a){return i("FormFieldWrapper",{key:a,attrs:{title:e.getFieldTitle(t.meta),mandatory:!t.meta.skippable}},[i("ConversationFormField",{ref:"fields",refInFor:!0,attrs:{field:t,onFieldUpdate:e.handleUpdate,onDeptUpdate:e.updateDepartmentId,fieldValues:e.fieldValues,inputType:e.inputType,isEdit:e.isEdit,onQuestionUpdate:e.onQuestionUpdate},on:{enter:function(t){return e.focusNextField(a)},campaignSelect:function(t){return e.isSubscribed=t}}})],1)}),e._t("field",null,{isSkippable:e.isSkippable})]],2)},[],!1,null,"605329e9",null);t.a=b.exports},"5b78":function(e,t,i){},"5f02":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=i("2b0e"),s=i("0970"),n=i("56e1"),o=i("8db4"),l=i("e6fd");let r=(e,t)=>{let i=e.input_card,a="inline"===t.inputType,l=!e.skippable,r=i.type===s.j.firstname,d=Object(o.V)().salutation,c=Object(o.kb)(d)?d:"-";return{component:r?"FirstName":a?"InlineInput":"Input",config:{placeHolder:Object(n.f)(i),maxLength:i.maxlength,mandatory:l,inputType:e.format,onInputChange:t.handleInputChange,value:"",focusTitle:Object(n.g)(i),salutation:i.salutation,isInlineInput:a,...r?{onSalutationUpdate:t.handleSalutationUpdate,selectedSalutation:c,isFirstNameCard:r}:{},...i.type===s.j.name?{autocomplete:"name"}:{},error:{show:!1,text:Object(n.e)(i),type:2},onEnter:(e,i)=>{i.preventDefault(),t.isValidField()&&t.$emit("enter")}},title:e.field_name}},d=(e,t)=>{let{defaultdepartment:i=""}=Object(o.V)(),n=t.departmentList,l=n.find(e=>e.dname===i);return l=Object(o.eb)()?l||n[0]:l,{component:"DepartmentDropdown",config:{deptProps:{list:n,onSelect:t.handleDeptSelect,selectedList:l?[l.id]:[],needSearch:!0,error:{},defaultTitle:e.placeholder||a.a.prototype.$doI18N(s.l[s.j.dept]),map:{id:"id",title:"name"},mandatory:!0}},title:e.field_name}},c=(e,t)=>{var i;let a=e.meta;switch(null===(i=a.input_card)||void 0===i?void 0:i.type){case s.j.phone:case s.j.email:case s.j.firstname:case s.j.lastname:return r(a,t);case s.j.name:return l.e?((e,t)=>({component:"NameField",config:{fields:e.fields.map(e=>e.meta.field_name===s.j.salutation?e:{...r(e.meta,t),meta:e.meta}),onNameUpdate:t.handleNameUpdate,onSalutationUpdate:t.handleSalutationUpdate}}))(a,t):r(a,t);case s.j.question:return((e,t)=>({component:"ConversationQuestionInput",config:{mandatory:!e.skippable,fieldConfig:e.input_card.questionConfig,onInput:e=>{t.fieldConfig.value=e,t.onQuestionUpdate(e)}}}))(a,t);case s.j.campaign:case s.j.newsletter:return((e,t)=>{let i=e.meta,a={text:e.msg||t.$doI18N("siqcw.campaignlabel"),mandatory:!i.skippable,isChecked:!1,onChange:e=>{a.isChecked=e,t.$emit("campaignSelect",e)}};return{component:"CheckBox",isCampaignField:!0,title:i.field_name,config:a}})(e,t);case"custom_field":return((e,t)=>{let i=e.options,a=e.type;return e.islabelNeeded=!0,["radio","checkbox","selectbox"].includes(a)&&i.forEach(t=>{t.name=e.name,t.checked=!1}),"selectbox"===a&&(e.defaultTitle=e.msg,e.list=i,e.needSearch=!0,e.map={title:"text"},e.islabelNeeded=!1),["url","textarea","text","number","email","percentage","decimal"].includes(a)&&(e.placeHolder=e.msg,e.islabelNeeded=!1),"label"!==a&&(e.style=void 0),e.onChange=t.jsapiOnChange,e.error={show:!1,text:"",type:2},{component:"CustomField",config:{mandatory:!e.skippable,config:e,isjsapi:"radio"===a||"checkbox"===a,value:void 0}}})(a,t);default:return Object(n.k)(a)?d(a,t):{}}}},"5f46":function(e,t,i){"use strict";var a={name:"FormFieldWrapper",props:{title:{type:String,default:""},mandatory:{type:Boolean,default:!1}}},s=i("2877"),n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.title?i("div",{staticClass:"field-title fw600 font13 mB5 clr3"},[e._v(" "+e._s(e._f("i18n")(e.title))+" "),e.mandatory?i("span",{staticClass:"clrR"},[e._v("*")]):e._e()]):e._e(),e._t("default")],2)},[],!1,null,null,null);t.a=n.exports},7456:function(e,t,i){"use strict";i.d(t,"a",function(){return D}),i.d(t,"d",function(){return V}),i.d(t,"c",function(){return L}),i.d(t,"e",function(){return P}),i.d(t,"b",function(){return W});var a=i("2b0e"),s=i("4360"),n=i("6661"),o=i("bec7"),l=i("b5f5"),r=i("e6fd"),d=i("24fa"),c=i("8db4"),u=i("2c40"),p=i("1026"),m=i("0970"),f=i("387f"),h=i("7f80"),b=i("bc04"),g=i("fe0d"),C=i("056b"),v=i("8048");const F=a.a.prototype;let _=(e,t)=>s.a.dispatch("conversationstore/"+e,t),y=(e,t)=>{s.a.commit("conversationstore/replaceTempChat",{clientId:e,newChatId:t})},j=e=>s.a.commit("conversationstore/setConversationDetail",e),O=e=>{F.$nextTick(()=>{F.$eventBus.$emit("handleBotTyping",{chatId:e,typing:!0}),F.$eventBus.$emit("handleBotWaitingCard",{chatId:e})})},I=()=>{let e=Object(c.V)().address;if(!e)return"";let{latitude:t,longitude:i,city:a,state:s,country:n}=e;return{country_code:e.countrycode,zip:e.zipcode,latitude:t,longitude:i,city:a,state:s,country:n}},D=(e,t,i)=>_("getEmbedPresence").then(e=>{let a=[e.chat,e.call].map(e=>{if(e)return{status:e.online,departments:e.departments.map(e=>{let{name:t}=e;return{bot_users:e.bots&&e.bots.ids,name:t,id:e.id,engaged:e.engaged,status:e.online,is_only_bot_available:e.only_bot_available,dname:t}})}});s.a.commit("embedstore/updateEmbedStatusData",a),t&&(Object(c.k)(t),F.$eventBus.$emit("onlineStatusChange",i)),i&&$Support.hideCallView()}),x=(e,t)=>{Object(g.a)(e,t);let i=Object(c.v)(t),{attender:a}=e;i.isBroadcast=i.isBroadcast&&!!a&&!a.is_bot;let n=a&&a.is_bot;if(n&&delete e.attender,j(e),"call"==e.type&&e.media){let t=Object.assign(e.media[0],{chatid:e.media[0].chid});"call"===e.queue_type&&(t.isCallQueued=!0,t.average_response_time=e.average_response_time),Object(c.B)().dynamicConf.useRTCPFlow?v.a.handleDirectSuccessCBK(t):SiqAVRouter.container.audioImpl.onDirectCallStarted(t)}let o=e.id;o!==t&&y(t,o);let l=Object(c.v)(o);l.isBot=n&&i.isBot,l.status===m.g.missed&&l.inTime===l.missedTime&&(D(l.departmentId),Object(c.pb)(o),F.$showBanner(l.missedReason===m.f?Object(p.d)():Object(p.g)(o)));let{wms_chat_id:r}=e,d=s.a.state.conversationstore.endedChats;if(d.includes(r))return Object(c.pb)(o),l.status=m.g.closed,void d.splice(d.indexOf(r),1);let u=s.a.state.conversationstore.pickedUpChats;u[r]&&(Object(c.mb)(l.id,u[r]),Object(c.pb)(o),l.status=m.g.live,delete u[r]),i.isTrigger&&i.attenderName&&Object(c.mb)(l.id,{attenderName:i.attenderName}),O(o),Object(C.a)(l,i),l.status===m.g.queue&&(Object(c.pb)(o),Object(b.b)(o))},w=e=>{Object(c.B)().dynamicConf.useRTCPFlow?v.a.clearWaitingDirectCall():($Support.handleCallEnd("",!0),SiqAVRouter.container.audioImpl.clearOngoingCallDataOnFailure()),Object(c.k)(e)},S=e=>s.a.commit("conversationstore/appendTempChat",e),$=e=>{let t=Object(d.b)(f.a.secretfields);t&&e&&F.$dispatchLog({sub:"invalid secret fields in conversation creation",log:t}),Object(d.c)(f.a.secretfields)},k=async e=>s.a.state.conversationstore.annonId||await _("getAnnonId",e),q=e=>i.e("chunk-7282f699").then(i.bind(null,"2ba5")).then(async t=>t.default.init(await k(e),e)),T=e=>_("getTranscriptList",{chatId:e,params:{from:"bottom"},reset:!0}),B=e=>!e&&s.a.getters["embedstore/isConsentEnabled"],E=e=>(Object(c.B)().dynamicConf.isFirstNameFlowEnabled?(e.first_name||(e.last_name=Object(c.W)(e)),e.first_name=e.first_name||"",e.last_name=e.last_name||""):e.name=Object(c.W)(e),e),N=e=>(Object(c.B)().dynamicConf.isFirstNameFlowEnabled?delete e.name:(delete e.first_name,delete e.last_name,delete e.salutation),e),V=async(e,t,s)=>{let u=Object(c.B)().dynamicConf.isFirstNameFlowEnabled;if(l.c)return;let{visitor:p}=e,h=Object(c.e)(e);p=E(p),h&&(e.question=Object(c.t)(u?Object(c.J)(p)||p.last_name:p.name)),Object(c.c)(e.department_id)&&i.e("chunk-2d0b9d37").then(i.bind(null,"3532"));let b=e.client_message_id=t||Object(c.x)();Object(n.h)(e.visitor);let C=!h&&B(s),v=t&&Object(c.v)(t)||{},y=Object(c.V)();if(!v.isProactive){e.attender_email=y.agent,e.custom_wait_time=y.waitime;let t=y.requestid;t&&(e.exid=t)}h||C||t&&Object(c.b)(v)||Object(g.b)(b);let j=Object(d.b)(f.a.secretfields);if(j&&(e.secret_fields=j),v.isTrigger){e.autotrigger=!0;let t=Object(d.b)("triggerDetails"),i=Object(d.b)("encryptedVisitorInfo"),a=v.triggerId;t=a?t[a]:t,t&&(delete t.triggerId,e.trigger_data=t),Object(c.B)().dynamicConf.isTriggerWithoutTrackingEnabled&&!y.uvid&&i&&(e.encrypted_visitor_info=i,e.avuid=r.d)}let k=I();if(k&&(e.visitor.address=k),v.meta&&(e.meta=v.meta),v.isProactive&&(e.chat_id=v.chId,delete e.department_id),S({chatDetail:{...t?v:{},...e,status:m.g[C?"temp":"pending"],inTime:Date.now()},client_message_id:b}),C){let t=Object(c.v)(b);return a.a.set(t,"showTerms",!0),void(t.initiationPayload=e)}O(b),u?await q({first_name:p.first_name,last_name:p.last_name}):await q({name:p.name}),p=N(p);let V=Object(c.I)();return V.length&&!h&&(e.past_messages=V),_(v.isProactive?"joinProactiveChat":"startChat",e).then(e=>{if(x(e,b),v.isTrigger){if(v.triggerId){let e=Object(d.b)("triggerDetails");delete e[v.triggerId],Object.keys(e).length?Object(d.d)("triggerDetails",e):Object(d.c)("triggerDetails")}else Object(d.c)("triggerDetails")}h||((e=>{let t=Object(d.b)(f.a.pastmessage);t&&(t.length>e.length&&F.$dispatchLog({sub:"invalid past message in conversation creation",log:t}),Object(d.c)(f.a.pastmessage))})(V),$());let t=e.id;return h||T(t).then(({data:i})=>{if(!Object(c.v)(e.id).isBot)return;let a=i[i.length-1];if(!a.message.msglist&&a.message.text!==e.question){var s;Object(c.nb)(t,r.N.message);let e=Object(c.v)(t);e.removeBotTyping(),null===(s=e.removeBotWaitingCard)||void 0===s||s.call(e),e.typingResolver&&e.typingResolver(),delete e.waitingMsgList}}),t}).catch(t=>{let i=F.$showBanner,a=(t=t.error)&&t.code;return a===o.e?(D("",b,h).then(()=>{F.$showBanner(F.$doI18N("embed.offlinemsg")),h&&w(b)}),Promise.reject()):(a===o.d?(Object(c.k)(e.client_message_id),i(t.message)):a===o.g&&$(!0),h&&w(b),Promise.reject())})},L=async(e,t,i)=>{let s=t.id,n=Object(c.x)(),o=Object(c.V)(),l=o.agent,r=o.waitime;return Object(g.b)(s),h.a.appendTempMessage(s,h.a.getTempTextMessageObj(n,e,{},s)),t.status=m.g.pending,t.inTime=Date.now(),a.a.set(t,"isBot",Object(c.c)(t.departmentId)),await q(i),_("reopenChat",{chatId:t.id,data:{message:e,attender_email:l,custom_wait_time:r,client_message_id:n}}).then(e=>{x(e,s),T(e.id).then(()=>{var i;Object(c.v)(e.id).isBot&&(null===(i=t.removeBotWaitingCard)||void 0===i||i.call(t))})})},P=async(e,t)=>{let i=s.a.getters["embedstore/formType"]===m.n.chat,a={},n={};i||r.e||await s.a.dispatch("embedstore/getVisitorConfiguration",{question:e,clearContext:!0}),a=Object(c.G)()||{},n=Object(u.b)(),a.dname&&(n.name=a.dname);let o=Object(c.x)(),l={question:e,id:o,attenderName:a.dname||n.name,attenderId:n.id,[i?"convform":"inlineform"]:!0,status:m.g.temp,prevChatDetail:t,...t||{}};S({chatDetail:l,client_message_id:o}),i||Object(u.a)(o)},W=async(e,t,i)=>{let s=Object(c.B)().dynamicConf.isFirstNameFlowEnabled,{visitor:l}=e,r=e.isdirectcall,d=!r&&B(i),u=Object(c.v)(t);if(d)return a.a.set(u,"showTerms",!0),void(u.initiationPayload=e);let p=Object(c.V)().requestid;p&&(e.exid=p);let f=I();f&&(e.visitor.address=f),a.a.set(u,"isOfflineSubmit",!0),l=E(l),e.message=r?F.$doI18N("audio.voicemsg"):e.question,delete e.question,Object(n.h)(e.visitor);let h={};return s?(h.first_name=l.first_name,h.last_name=l.last_name):h.name=l.name,await k(h),r&&await q(h),l=N(l),_("leaveMessage",e).then(e=>{let i=e.id;if(j(e),t&&y(t,i),Object(C.b)(i),!r){let e=Object(c.v)(i);e.status=m.g.cmissed,setTimeout(()=>{e.status=m.g.missed},3e3)}return Object(c.qb)(i),i}).catch(e=>(e.error.code===o.f?D("",t,r).then(()=>{F.$showBanner(F.$doI18N("chat.onlinebanner"))}):r&&F.$showBanner(F.$doI18N("embed.sendfail")),Promise.reject()))}},"769a":function(e,t,i){"use strict";i.r(t);var a=i("ef71"),s=i("c153"),n=i("1549"),o={name:"ConversationMessageWindowDialog",props:{iconClass:{type:String,default:""},popupClass:{type:String,default:""},title:{type:String,default:""},desc:{type:String,default:""},inputProps:Object,ctaButton:{type:Object,required:!0},cancelContent:{type:String,default:"siq.cancel"},onClose:{type:Function,required:!0}},mounted(){!a.c&&this.$refs.accept.$el.focus()},components:{Button:s.a,TextareaComponent:n.a}},l=(i("12de"),i("dddb"),i("2877")),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ui-transitions",{directives:[{name:"focus-out",rawName:"v-focus-out",value:e.onClose,expression:"onClose"}],attrs:{enterToClass:"siq-fadein",leaveToClass:"siq-fadeout"}},[i("div",{staticClass:"siqcw-innerpop-cont"},[i("div",{directives:[{name:"key",rawName:"v-key.escape",value:e.onClose,expression:"onClose",modifiers:{escape:!0}},{name:"click-out",rawName:"v-click-out",value:e.onClose,expression:"onClose"},{name:"aria",rawName:"v-aria:dialog",value:{label:e.title},expression:"{label: title}",arg:"dialog"}],staticClass:"siqcw-inner-popup",class:[e.popupClass,{input:e.inputProps}],attrs:{"data-zsqa":"chatbody_inner_dialog"}},[e.inputProps?i("header",{staticClass:"flexC siqcw-inner-pop-hdr",attrs:{"data-zsqa":"dialog_header_section"}},[e.iconClass?i("icon",{staticClass:"ifont15 mR10 clr7",class:e.iconClass}):e._e(),i("span",{staticClass:"clr7 flexG"},[e._v(e._s(e._f("i18n")(e.title)))])],1):e._e(),i("section",{class:[e.inputProps?"siqcw-popup-body":"mT10 textC"],attrs:{"data-zsqa":"text_section"}},[e.inputProps?[i("TextareaComponent",e._b({staticClass:"clr3-dark",class:{"msg-window-div":e.inputProps.hasEmoji},attrs:{id:"siqtextarea",showCount:!!e.inputProps.maxLength}},"TextareaComponent",e.inputProps,!1))]:[e.iconClass?i("Icon",{class:e.iconClass}):e._e(),e.title?i("div",{staticClass:"font18 mT5 clr3"},[e._v(e._s(e._f("i18n")(e.title)))]):e._e(),e.desc?i("div",{staticClass:"mT5 clr9"},[e._v(e._s(e._f("i18n")(e.desc)))]):e._e()]],2),i("footer",{staticClass:"flexM siqcw-edit-fdr",attrs:{"data-zsqa":"consent_btns"}},[i("Button",{attrs:{text:e.cancelContent,className:"siqcw-btn-cancel",clickHandler:e.onClose}}),i("Button",e._b({ref:"accept",staticClass:"mL15"},"Button",e.ctaButton,!1))],1)])])])},[],!1,null,"435e301e",null);t.default=r.exports},"77a8":function(e,t,i){},8293:function(e,t,i){},9654:function(e,t,i){"use strict";var a=i("2f62"),s=i("f4e5"),n={name:"InlineInput",inheritAttrs:!1,computed:{inputProps(){return this.$attrs}},components:{InputComponent:s.a},methods:{setFocus(){this.$refs.input.setFocus()}}},o=(i("e794"),i("2877")),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InputComponent",e._b({ref:"input",class:{filled:e.inputProps.value},attrs:{placeHolder:e._f("i18n")(e.inputProps.value?e.inputProps.focusTitle:e.inputProps.placeHolder)},scopedSlots:e._u([{key:"post-slot",fn:function(){return[i("span",{staticClass:"input-mandatory clrR mL5 hide"},[e._v("*")])]},proxy:!0}])},"InputComponent",e.inputProps,!1))},[],!1,null,"0ac27f62",null),r=l.exports,d=i("db3a"),c=i("e335"),u=i("f026"),p=i("00a1"),m={name:"DepartmentDropdown",props:{deptProps:{type:Object,required:!0}},data:()=>({formatedDeptList:[]}),watch:{"deptProps.list":{immediate:!0,handler:"formatDepartments"}},computed:{...Object(a.b)("embedstore",["isWidgetOffline"])},methods:{formatDepartments(){let e=[],t=[],{deptProps:i}=this;i.list.forEach(i=>{(i={...i,name:Object(c.a)(i.name||i.display_name||i.dname),engaged:i.engaged||i.is_engaged}).status?e.push(i):t.push(i)}),this.formatedDeptList=this.sortByTitle(e).concat(this.sortByTitle(t))},sortByTitle:e=>e.sort((e,t)=>{let i=e.name.toLowerCase(),a=t.name.toLowerCase();return i>a?1:a>i?-1:0})},components:{DropDown:u.a,Icon:p.a}},f=m,h=(i("e431"),Object(o.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DropDown",e._b({attrs:{list:e.formatedDeptList},scopedSlots:e._u([{key:"title-slot",fn:function(){return[i("span",{staticClass:"input-mandatory mL5 clrR hide"},[e._v("*")])]},proxy:!0},{key:"pre-slot",fn:function(t){var a=t.item;return[i("div",{staticClass:"flexC drpdwn-srch-clr ifont13"},[i("Icon",{directives:[{name:"title",rawName:"v-title",value:e.$doI18N(a.status?"siq.online":a.engaged&&!e.isWidgetOffline?"siq.engaged":"siq.offline"),expression:"$doI18N( item.status ? 'siq.online' : (item.engaged && !isWidgetOffline ? 'siq.engaged' : 'siq.offline') )"}],class:a.status?"online-circle":a.engaged&&!e.isWidgetOffline?"engage-circle":"offline-circle",attrs:{"data-zsqa":"status_icon"}})],1)]}}])},"DropDown",e.deptProps,!1))},[],!1,null,null,null)),b=h.exports,g={name:"Radio",props:{options:{type:Array,required:!0},onChange:{type:Function,default:()=>{}},error:{type:Object,default:()=>({})}}},C=(i("fea4"),Object(o.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"radio flex flexW"},e._l(e.options,function(t,a){return i("div",{key:a,staticClass:"flex mR10 posrel mB10 clr6"},[i("input",{staticClass:"posabs rad-inp opac0",attrs:{type:"radio",name:t.name,id:t.text,"data-zsqa":"radio_"+a},domProps:{checked:t.checked},on:{change:function(i){return e.onChange(t)}}}),i("em",{staticClass:"siqico-radio mR10",class:{"err-action-fld":e.error.show}}),i("label",{attrs:{for:t.text}},[e._v(e._s(t.text))])])}),0)},[],!1,null,null,null)),v=C.exports,F={name:"CheckboxList",props:{error:{type:Object,default:()=>({})},options:{type:Array,default:()=>{}},onChange:{type:Function,default:()=>{}}},methods:{onFieldChange(e,t){this.$set(e,"checked",t);let i=this.options.reduce((e,t)=>{let{checked:i,value:a}=t;return e+(i?a+";":"")},"");i=i.slice(0,-1),this.onChange(i)}},components:{CheckBox:d.a}},_=F,y=Object(o.a)(_,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.options,function(t,a){return i("check-box",{key:a,staticClass:"mR10 mB10",attrs:{text:t.text,isChecked:t.checked,hasError:e.error.show,onChange:function(i){return e.onFieldChange(t,i)}}})}),1)},[],!1,null,null,null),j=y.exports,O=i("1549"),I={name:"CustomFieldLabel",props:{label:{type:String,default:""},isRequired:{type:Boolean,default:!1}}},D=(i("c79d"),Object(o.a)(I,function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.label?i("div",{staticClass:"clr7 mB5",attrs:{"data-zsqa":"customfield_label"}},[e._v(" "+e._s(e.label)+" "),e.isRequired?i("em",{directives:[{name:"title",rawName:"v-title",value:"siq.required",expression:"'siq.required'"}],staticClass:"req clrR"},[e._v("*")]):e._e()]):e._e()},[],!1,null,null,null)),x=D.exports,w={name:"CustomField",props:{config:{type:Object,default:()=>{}},isMandatory:{type:Boolean,default:!1}},data(){return{componentProps:this.config,currentComponent:{radio:"Radio",checkbox:"CheckBoxList",selectbox:"Dropdown",textarea:"TextArea"}[this.config.type]||"Input"}},methods:{onChange(e){e=e.value||e,this.config.onChange({name:this.config.name,value:e})}},components:{Radio:v,CheckBoxList:j,Dropdown:u.a,Input:s.a,TextArea:O.a,CustomFieldLabel:x}},S=w,$=(i("d17d"),Object(o.a)(S,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cus-cont",class:{"cus-mandatory":"selectbox"!=e.config.type}},[e.config.islabelNeeded?i("custom-field-label",{style:e.config.style,attrs:{label:e.config.msg,isRequired:!e.config.skippable}}):e._e(),i(e.currentComponent,e._b({tag:"component",attrs:{error:e.config.error,onChange:e.onChange,onSelect:e.onChange,onInputChange:e.onChange}},"component",e.componentProps,!1))],1)},[],!1,null,"04f43222",null)),k=$.exports,q=i("5f46"),T=i("8db4"),B={name:"FirstName",props:{inputType:{type:String,default:""},mandatory:{type:Boolean,default:!1},needFocusAnim:{type:Boolean,default:!1},onEnter:{type:Function,default:()=>{}},onInputChange:{type:Function,default:()=>{}},placeHolder:{type:String,default:""},value:{type:String,default:""},salutation:{type:Boolean,default:!1},onSalutationUpdate:{type:Function,default:()=>{}},isInlineInput:{type:Boolean,default:!1},selectedSalutation:{type:String,default:"-"},error:{type:Object,default:()=>({})},focusTitle:{type:String,default:""}},data(){return{dropDownProps:{list:Object(T.S)(),needWrapperClass:!0,needSearch:!1},salutationValue:Object(T.R)(this.selectedSalutation)}},beforeMount(){this.dropDownProps.list.unshift({title:"-",id:"-"})},methods:{handleSalutationChange(e){this.onSalutationUpdate(e.id)},setFocus(){this.$refs.input.setFocus()}},components:{Input:s.a,DropDown:u.a,InlineInput:r,FormFieldWrapper:q.a}},E=B,N=(i("99d1"),Object(o.a)(E,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex siqcw-first-name"},[e.salutation?i("FormFieldWrapper",{staticClass:"posrel",attrs:{title:e.$doI18N("siqcw.salutation")}},[i("DropDown",e._b({attrs:{defaultTitle:e.salutationValue,onSelect:e.handleSalutationChange}},"DropDown",e.dropDownProps,!1))],1):e._e(),i(e.isInlineInput?"InlineInput":"Input",e._b({ref:"input",tag:"component",staticClass:"w100",class:{"input-salutation mL15 flexG":e.salutation,posrel:e.mandatory}},"component",e.$props,!1))],1)},[],!1,null,"56100baf",null)),V=N.exports,L=i("b8c0"),P={name:"ConversationQuestionInput",props:{onEnter:Function,onInput:Function,hasError:Boolean,fieldConfig:Object},data:()=>({value:""}),computed:{...Object(a.d)("embedstore",["visitorInfo","tempVisitorInfo"]),...Object(a.b)("embedstore",["isWidgetOffline","lang"]),placeHolder(){return this.visitorInfo.messagehint||this.fieldConfig.placeholder[this.lang]||this.$doI18N("siq.trad.placeholder",this.$doI18N(this.isWidgetOffline?"siq.submit":"siq.startchat"))}},beforeMount(){this.value=this.tempVisitorInfo.question||this.visitorInfo.question||""},methods:{isValidField:()=>!0},components:{TextArea:O.a}},W=(i("bdd2"),Object(o.a)(P,function(){var e=this,t=e.$createElement;return(e._self._c||t)("TextArea",{ref:"messageArea",staticClass:"font15",attrs:{onInputChange:e.onInput,onEnter:e.onInput,value:e.value,placeHolder:e.placeHolder,hasEmoji:e.fieldConfig.share_emoji,error:{show:e.hasError}}})},[],!1,null,"4291094b",null)),U=W.exports,R=i("5f02"),M=i("56e1"),A=i("0970"),H=i("e6fd"),z={name:"ConversationFormField",props:{field:{type:Object,required:!0},onFieldUpdate:{type:Function,default:()=>{}},onDeptUpdate:{type:Function,default:()=>{}},onQuestionUpdate:Function,fieldValues:{type:Object,required:!0},inputType:{type:String,default:""},isEdit:{type:Boolean,default:!1}},data(){let{field:e}=this;return{currentComponent:"",fieldConfig:{},fieldMeta:e.meta,isDeptField:Object(M.k)(e.meta),fieldTitle:""}},inject:{isCallForm:{default:()=>!1},isCustomField:{default:()=>!1}},computed:{...Object(a.b)("embedstore",["callDepartments","chatDepartments"]),departmentList(){return this.isCallForm?this.callDepartments:this.chatDepartments},fieldKey(){return Object(M.b)(this.fieldMeta)},deptConfig(){return this.fieldConfig.deptProps},selectedDeptId(){return H.t?"":this.deptConfig.selectedList[0]},selectedDeptDetail(){return this.deptConfig.list.find(e=>e.id===this.selectedDeptId)}},methods:{setFieldValueWatcher(){var e;let{fieldKey:t}=this;t&&(null===(e=this.fieldUnWatcher)||void 0===e||e.call(this),this.fieldUnWatcher=this.$watch(()=>this.fieldValues[t],e=>{this.fieldConfig.value=e},{immediate:!0}))},jsapiOnChange(e){let{name:t,value:i}=e;this.fieldConfig.value=i,this.onFieldUpdate(t,i,!0),this.handleCustomFieldError({})},handleNameUpdate(e,t){this.onFieldUpdate(e,t)},handleInputChange(e){this.fieldConfig.value=e,this.removeError(),this.onFieldUpdate(this.fieldKey,e)},handleSalutationUpdate(e){this.onFieldUpdate("salutation",e)},handleDeptSelect(e){this.removeError(),this.departmentId=e.id,this.fieldConfig.deptProps.selectedList=[e.id],this.onDeptUpdate(e)},removeError(){(this.isDeptField?this.fieldConfig.deptProps:this.fieldConfig).error.show=!1},isEmptyField(){let{fieldConfig:e}=this,t=Object(T.V)(),i="text"===e.inputType?"name":e.inputType;return("name"!==i&&"last_name"!==i||!Object(T.f)(t[i])?t[i]:"")&&!e.value?(this.setErrorText("field.required"),!0):(this.setErrorText(A.k[this.fieldMeta.input_card.type]),!1)},handleCustomFieldError({show:e=!1,text:t=""}){let i={show:e};t&&(i={...i,text:t,type:2}),this.fieldConfig.config=Object.assign({},this.fieldConfig.config,{error:i})},isValidField(){let{fieldConfig:e}=this,t=this.isCustomField(this.fieldMeta);if(Object(T.eb)())return!0;if(this.$refs.currentComp.isValidField)return this.$refs.currentComp.isValidField();if(e.mandatory&&!e.value||this.isDeptField&&!this.departmentId)return this.showError(this.$doI18N("all.errinfo"));let i=Object(M.l)(this.fieldMeta,e.value);if(i=this.isEdit&&"campaign"!==this.fieldMeta.input_card.type&&this.isEmptyField()?{error:!0}:i,i.error){if(t&&e.mandatory)return void this.handleCustomFieldError({show:!0,text:i.message});this.showError(i.message)}return!i.error},setErrorText(e){this.fieldConfig.error.text=this.$doI18N(e)},showError(e){this.setFocus();this.isDeptField?this.fieldConfig.deptProps.error={show:!0}:(this.fieldConfig.error||{}).show=!0},setFocus(){["setInputFocus","setFocus"].some(e=>{let t=this.$refs.currentComp[e];return t&&t(),!!t})},setFieldConfig(){let e=this.field,{component:t,config:i,title:a}=Object(R.a)(e,this);this.currentComponent=t,this.fieldConfig=i,this.fieldTitle=a,this.fieldMeta=e.meta,this.isDeptField=Object(M.k)(e.meta),this.setFieldValueWatcher(),this.setDeptWatcher()},setDeptWatcher(){this.isDeptField&&(this.selectedDeptId&&this.handleDeptSelect(this.selectedDeptDetail),this.deptWatcher=this.$watch(()=>this.departmentList,e=>{this.fieldConfig.deptProps.list=e,this.selectedDeptId&&this.handleDeptSelect(this.selectedDeptDetail)}))}},watch:{field:{immediate:!0,deep:!0,handler(){this.setFieldConfig()}}},beforeDestroy(){var e,t;null===(e=this.fieldUnWatcher)||void 0===e||e.call(this),null===(t=this.deptWatcher)||void 0===t||t.call(this)},components:{Input:s.a,InlineInput:r,CheckBox:d.a,DepartmentDropdown:b,CustomField:k,FirstName:V,NameField:L.a,ConversationQuestionInput:U}},K=z,Q=(i("d2bb"),Object(o.a)(K,function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.currentComponent,e._b({ref:"currentComp",tag:"component",staticClass:"mB20 fshrink form-field",class:{posrel:e.fieldConfig.mandatory&&!e.fieldConfig.isjsapi&&!e.fieldConfig.isFirstNameCard||e.isDeptField},attrs:{"data-zsqa":e.fieldTitle}},"component",e.fieldConfig,!1))},[],!1,null,null,null));t.a=Q.exports},9686:function(e,t,i){},"97de":function(e,t,i){},"99d1":function(e,t,i){"use strict";i("9686")},a620:function(e,t,i){"use strict";i("aa92")},aa92:function(e,t,i){},b8c0:function(e,t,i){"use strict";var a=i("2f62"),s=i("0970"),n=i("8db4"),o=i("f026"),l={name:"SalutationSelection",props:{onSalutationUpdate:Function,salutation:{type:String,default:""}},data(){return{dropDownProps:{list:Object(n.S)(),needWrapperClass:!0,needSearch:!1},salutationValue:Object(n.R)(this.salutation)}},beforeMount(){this.dropDownProps.list.unshift({title:"-",id:"-"})},methods:{handleSalutationChange(e){this.onSalutationUpdate(e.id)}},components:{DropDown:o.a}},r=l,d=(i("1141"),i("2877")),c=Object(d.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("DropDown",e._b({attrs:{defaultTitle:e.salutationValue,onSelect:e.handleSalutationChange}},"DropDown",e.dropDownProps,!1))},[],!1,null,"e27b5076",null),u=c.exports,p=i("f4e5"),m=i("5f46"),f={name:"NameField",props:{fields:{type:Array,required:!0},onSalutationUpdate:Function,onNameUpdate:Function},data:()=>({nameValues:{}}),computed:{...Object(a.d)("embedstore",["visitorInfo","tempVisitorInfo"]),hasSalutation(){return this.fields.some(e=>e.meta.field_name===s.j.salutation)},inputFields(){return this.hasSalutation?this.fields.slice(1):this.fields}},beforeMount(){let{visitorInfo:e,tempVisitorInfo:t}=this;this.nameValues=[s.j.salutation,"last_name","first_name"].reduce((i,a)=>(i[a]=t[a]||e[a],i),{})},methods:{setFocus(){this.$refs[this.inputFields[0].meta.field_name].setFocus()},handleInput(e,t){let i=this.inputFields[t];i.config.error.show=!1;let a=i.meta.field_name;this.$set(this.nameValues,a,e),this.onNameUpdate(a,e)},isValidField(){return!this.inputFields.some(e=>{if(e.config.mandatory&&!this.nameValues[e.meta.field_name])return e.config.error.show=!0,this.$refs[e.meta.field_name].setFocus(),!0})}},components:{FormFieldWrapper:m.a,Input:p.a,SalutationSelection:u}},h=f,b=Object(d.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormFieldWrapper",[i("div",{staticClass:"flexC"},[e.hasSalutation?i("SalutationSelection",{staticClass:"mR5",attrs:{salutation:e.nameValues.salutation,onSalutationUpdate:e.onSalutationUpdate}}):e._e(),i("Input",e._b({ref:e.inputFields[0].meta.field_name,attrs:{onInputChange:function(t){return e.handleInput(t,0)},value:e.nameValues[e.inputFields[0].meta.field_name]}},"Input",e.inputFields[0].config,!1))],1),e.inputFields[1]?i("Input",e._b({ref:e.inputFields[1].meta.field_name,staticClass:"mT10",attrs:{onInputChange:function(t){return e.handleInput(t,1)},value:e.nameValues[e.inputFields[1].meta.field_name]}},"Input",e.inputFields[1].config,!1)):e._e()],1)},[],!1,null,null,null);t.a=b.exports},baec:function(e,t,i){"use strict";var a=i("2f62"),s=i("8db4"),n=i("e6fd"),o=i("56e1"),l=i("0970");t.a={data:()=>({departmentStatus:!0}),computed:{...Object(a.b)("embedstore",["embedStatus"]),componentStatus(){return this.isCallForm?Object(s.B)().callStatus:this.embedStatus},isWidgetOnline(){return n.t?this.embedStatus:this.componentStatus&&this.departmentStatus}},methods:{handleDepartmentUpdate(e){this.departmentStatus=e},getFieldTitle(e){return Object(o.j)(e)?"":Object(o.k)(e)?this.$doI18N(l.m[l.j.dept]):Object(o.g)(e.input_card)}}}},bdd2:function(e,t,i){"use strict";i("dffa")},bf1d:function(e,t,i){"use strict";i("2ee5")},c153:function(e,t,i){"use strict";var a={name:"Button",props:{iconClass:{type:String,default:""},text:{type:String,default:""},clickHandler:{type:Function,default:()=>{}},className:{type:String,default:"siqcw-btn"},disabled:Boolean,loading:Boolean},computed:{btnText(){return this.$doI18N(this.text)},isWhiteBtn(){return this.className.includes("siqcw-wbtn")}}},s=(i("bf1d"),i("2877")),n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({directives:[{name:"aria",rawName:"v-aria:button",value:{label:e.btnText,disabled:e.disabled},expression:"{ label: btnText, disabled }",arg:"button"},{name:"a11y",rawName:"v-a11y",value:{disabled:e.disabled},expression:"{ disabled }"}],staticClass:"flexC curP posrel user-non",class:[e.className,{disabled:e.disabled||e.loading}],attrs:{siqplayground:"button","data-zsqa":e.btnText+"_btn"}},e.disabled||e.loading?{}:{click:e.clickHandler}),[e.iconClass?i("icon",{staticClass:"mR5 ifont15",class:e.iconClass}):e._e(),i("span",{directives:[{name:"title",rawName:"v-title.isElips",value:e.btnText,expression:"btnText",modifiers:{isElips:!0}}],staticClass:"elips posrel lineN",attrs:{siqplayground:"btntext"}},[e._v(e._s(e.btnText))]),e._t("post-slot"),e.loading?i("div",{staticClass:"flexM w100 h100 posabs z-index1"},[i("LoadingIcon",{attrs:{isGray:e.isWhiteBtn,className:"ifont18"}})],1):e._e()],2)},[],!1,null,null,null);t.a=n.exports},c2cc:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s}),i("07db");const a={default:()=>()=>{}},s={default:()=>()=>({})}},c70f:function(e,t,i){},c79d:function(e,t,i){"use strict";i("c70f")},c7bc:function(e,t,i){},c95e:function(e,t,i){"use strict";var a={name:"ConversationFormWrapper"},s=(i("a620"),i("2877")),n=Object(s.a)(a,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"aria",rawName:"v-aria:form",arg:"form"}],staticClass:"flex fdirection"},[e._t("default")],2)},[],!1,null,"60b169a2",null);t.a=n.exports},ce92:function(e,t,i){"use strict";i("2b0b")},d17d:function(e,t,i){"use strict";i("3a7e")},d2bb:function(e,t,i){"use strict";i("5b78")},daad:function(e,t,i){"use strict";var a=i("4360"),s=i("2f62"),n=i("e6fd"),o=i("acfe"),l=i("8db4"),r=i("5c8c"),d=i("ef71");let c={chrome:53,firefox:68,opera:40,safari:11,edge:79},u={chrome:72,firefox:66,opera:60,safari:13,edge:79};var p=i("6661"),m=i("8048"),f=i("9b31"),h=i("0970");t.a={provide(){return{startAudioCall:this.startAudioCall,checkIfHasCallIcon:()=>this.hasCallIcon}},computed:{...Object(s.d)("conversationstore",["annonId","mediaFilesLoaded","isCallDisabled"]),...Object(s.b)("conversationstore",["ongoingCallDetail"]),hasCallIcon(){let e=Object(l.B)().dynamicConf.useRTCPFlow;if(this.mediaFilesLoaded&&!this.isCallDisabled&&this.isLiveOperatorChat&&!(e=>e.isRecording||!e.attenderHasCall)(this.chatDetail)&&!this.ongoingCallDetail.chid&&(e?((e,t,i)=>{t=t.toLowerCase();let a=e?"audio"===e?c:u:c;return a[t]&&parseInt(i)>=a[t]})("audio",d.a,d.b):Object(r.a)()))return(()=>{let e=parent.window.location.protocol;return e.includes("https")||e.includes("file:")})()&&Object(o.a)()&&Object(l.B)().portalConfig.audiocall&&a.a.getters["embedstore/checkIsComponentSupported"](h.h.call)&&(!n.e||Object(l.B)().chatConfig.allow_audio_call)}},methods:{startAudioCall(){if(Object(l.hb)())return this.checkConsentAndInitCall();$Support.removeCallView();let e={chatid:this.chId,wmsid:this.annonId,mediarequest:!0,mediainvitation:!0,lsuid:this.attenderId,lsid:n.f,session_id:this.$store.state.sessionId,type:"audio",mode:"visitor"};SiqAVRouter.container.audioImpl.startAudioCall(e)},startDirectAudioCall:()=>Object(l.hb)()?new Promise(e=>{m.a.handleInitDirectCall(),e()}):new Promise(e=>{Object(r.c)().then(()=>{$Support.removeCallView(),Object(p.b)(),SiqAVRouter.container.audioImpl.startApiDirectCall({conversationtype:0,successCbk:function(t){SiqAVRouter.container.uiHandler.initiateDirectCallUI(t),e()}}),SiqAVRouter.container.uiHandler.initiateDirectCallUI()})}),startVoiceMail:e=>($Support._callPayload=e,Object(l.hb)()?($Support.showOnGoingCall(),m.a.setVoiceMessageType("offline"),f.a.updateVoiceMessageState(!0),Promise.resolve()):Object(r.c)().then(()=>{$Support.removeCallView(),SiqAVRouter.container.detailsHandler.populateRecorder()}))}}},db3a:function(e,t,i){"use strict";var a=i("fa7d"),s={name:"CheckBox",props:{text:{type:String,default:""},onChange:{type:Function,required:!0},isChecked:{type:Boolean,default:!1},id:{type:String,default:()=>Object(a.a)()},hasError:{type:Boolean,default:!1}},methods:{handleKeyDown(e){let{keyCode:t}=e;13===t&&this.handleChange(e)},handleChange(e){e.preventDefault(),this.onChange(!this.isChecked)}}},n=s,o=(i("ce92"),i("2877")),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"checkbox curP iflex flexT posrel clr8"},[i("input",{ref:"checkbox",staticClass:"curP hide_checkbox",attrs:{type:"checkbox",id:e.id,"data-zsqa":"checkbox"},domProps:{checked:e.isChecked},on:{keydown:e.handleKeyDown,change:e.handleChange}}),i("span",{staticClass:"siqico-chkbx ifont16",class:{"siqico-chkbox-checked":e.isChecked,"err-action-fld":e.hasError}}),e.text||e.$scopedSlots.default?i("label",{staticClass:"curP pL5 lineN",attrs:{for:e.id}},[e.text?i("span",[e._v(" "+e._s(e.text)+" ")]):e._t("default")],2):e._e()])},[],!1,null,null,null);t.a=l.exports},dddb:function(e,t,i){"use strict";i("0f6e")},dffa:function(e,t,i){},e431:function(e,t,i){"use strict";i("19c9")},e794:function(e,t,i){"use strict";i("77a8")},fea4:function(e,t,i){"use strict";i("97de")}}]);